"use strict";(self.webpackChunktej_resources=self.webpackChunktej_resources||[]).push([[76],{8482:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>d,contentTitle:()=>s,default:()=>p,frontMatter:()=>l,metadata:()=>c,toc:()=>u});var r=n(4848),o=n(8453),a=n(1470),i=n(9365);const l={sidebar_position:4},s=void 0,c={id:"PlatformIO/Troubleshooting",title:"Troubleshooting",description:"Function Not Declared in Scope",source:"@site/docs/PlatformIO/Troubleshooting.md",sourceDirName:"PlatformIO",slug:"/PlatformIO/Troubleshooting",permalink:"/Atlas/docs/PlatformIO/Troubleshooting",draft:!1,unlisted:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/PlatformIO/Troubleshooting.md",tags:[],version:"current",sidebarPosition:4,frontMatter:{sidebar_position:4},sidebar:"tutorialSidebar",previous:{title:"Libraries",permalink:"/Atlas/docs/PlatformIO/Libraries"},next:{title:"Basic IO",permalink:"/Atlas/docs/Labs/Basic IO"}},d={},u=[{value:"Function Not Declared in Scope",id:"function-not-declared-in-scope",level:2},{value:"Incorrect way to do it (Fixed by Arduino IDE Compiler)",id:"incorrect-way-to-do-it-fixed-by-arduino-ide-compiler",level:3},{value:"Why is this wrong?",id:"why-is-this-wrong",level:3},{value:"Explanation",id:"explanation",level:3},{value:"Explanation",id:"explanation-1",level:3},{value:"Script.cpp",id:"scriptcpp",level:4},{value:"script.h",id:"scripth",level:4},{value:"Explanation",id:"explanation-2",level:3},{value:"Unable to Deploy to Microcontroller",id:"unable-to-deploy-to-microcontroller",level:2},{value:"Manually Interrupting Microcontroller (ESP32)",id:"manually-interrupting-microcontroller-esp32",level:3}];function h(e){const t={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",h4:"h4",hr:"hr",p:"p",pre:"pre",strong:"strong",...(0,o.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.h2,{id:"function-not-declared-in-scope",children:"Function Not Declared in Scope"}),"\n",(0,r.jsx)(t.p,{children:"Coming over from Arduino IDE, you may notice that some of your projects may not work out of the box. In most cases, this is due to methods not being declared in scope. The Arduino IDE compiler is a little beginner friendly and in a way attempts to hold your hand when it comes to making declaration mistakes as shown below. PlatformIO is a little less forgiving but learning to do it right is really simple!"}),"\n",(0,r.jsx)(t.h3,{id:"incorrect-way-to-do-it-fixed-by-arduino-ide-compiler",children:"Incorrect way to do it (Fixed by Arduino IDE Compiler)"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-cpp",children:"void setup() {}\r\n\r\nvoid loop() {\r\n    int number = method1(1); \r\n}\r\n\r\nint method1(int value) {\r\n    return value; \r\n}\n"})}),"\n",(0,r.jsx)(t.h3,{id:"why-is-this-wrong",children:"Why is this wrong?"}),"\n",(0,r.jsxs)(t.p,{children:["In the example above, ",(0,r.jsx)(t.code,{children:"method1()"})," is called within ",(0,r.jsx)(t.code,{children:"loop()"})," however, the method is only declared after the ",(0,r.jsx)(t.code,{children:"loop()"})," function. When the compiler attempts to compile the code, it cannot find a reference to ",(0,r.jsx)(t.code,{children:"method1()"})," because the function hasn't been declared before its usage. To put it simply, the code is parsed sequentially from top to bottom, so the compiler needs to know about a function before it encounters a call to it. To resolve this, you can use one of the three methods listed below."]}),"\n",(0,r.jsxs)(a.A,{children:[(0,r.jsxs)(i.A,{value:"movingmethodup",label:"Moving Method Up",default:!0,children:[(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-cpp",children:"int method1(int value) {\r\n    return value; \r\n}\r\n\r\nvoid setup() {}\r\n\r\nvoid loop() {\r\n    int number = method1(1);\r\n}\n"})}),(0,r.jsx)(t.h3,{id:"explanation",children:"Explanation"}),(0,r.jsxs)(t.p,{children:["In this example, ",(0,r.jsx)(t.code,{children:"method1()"})," is simply moved above ",(0,r.jsx)(t.code,{children:"loop()"})," where its first called. By doing so, the compiler would have already gone over the method when it reaches the call in ",(0,r.jsx)(t.code,{children:"loop()"}),"."]})]}),(0,r.jsxs)(i.A,{value:"declaringMethodAbove",label:"Adding Declaration Above",default:!0,children:[(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-cpp",children:"int method1(int value);\r\n\r\nvoid setup() {}\r\n\r\nvoid loop() {\r\n    int number = method1(1); \r\n}\r\n\r\nint method1(int value) {\r\n    return value; \r\n}\n"})}),(0,r.jsx)(t.h3,{id:"explanation-1",children:"Explanation"}),(0,r.jsxs)(t.p,{children:["In this example, instead of moving the ",(0,r.jsx)(t.code,{children:"method1()"})," above ",(0,r.jsx)(t.code,{children:"loop()"}),", we declare the method signature at the top of the script. This tells the compiler that ",(0,r.jsx)(t.code,{children:"method1()"})," exists and will be defined later. If you want to avoid the use of a header file, this is one of the neatest ways of solving this issue."]})]}),(0,r.jsxs)(i.A,{value:"usingHeaderFile",label:"Using Header File",default:!0,children:[(0,r.jsx)(t.h4,{id:"scriptcpp",children:"Script.cpp"}),(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-cpp",children:'#include "script.h"\r\n\r\nvoid setup() {}\r\n\r\nvoid loop() {\r\n    int number = method1(1); \r\n}\r\n\r\nint method1(int value) {\r\n    return value; \r\n}\n'})}),(0,r.jsx)(t.h4,{id:"scripth",children:"script.h"}),(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-cpp",children:"#ifndef SCRIPT_H\r\n#define SCRIPT_H\r\n\r\nint method1(int value); \r\n\r\n#endif\n"})}),(0,r.jsx)(t.h3,{id:"explanation-2",children:"Explanation"}),(0,r.jsxs)(t.p,{children:["By creating a header file and including it at the top of your script, you allow the compiler to recognize method declarations before they are fully defined. Amongst many other benefits, using a header file is by far the neatest solution of the three and can prove useful in larger projects. You can learn more about the utilization of header files ",(0,r.jsx)(t.a,{href:"/docs/Programming/Header%20Files",children:"here"}),"."]})]})]}),"\n",(0,r.jsx)(t.admonition,{type:"note",children:(0,r.jsxs)(t.p,{children:["If you choose to create a header file, ensure that the file has the same exact name as the target script ",(0,r.jsxs)(t.strong,{children:["(e.g. ",(0,r.jsx)(t.code,{children:"main.cpp"})," & ",(0,r.jsx)(t.code,{children:"main.h"}),")"]}),'. Also note that when creating your #ifndef and #define statements, you have to use the filename in all capital letters, and with spaces and full stops replaced by "_". For example, ',(0,r.jsx)(t.code,{children:"test script.h"})," would be defined as ",(0,r.jsx)(t.code,{children:"ifndef TEST_SCRIPT_H"}),"."]})}),"\n",(0,r.jsx)(t.hr,{}),"\n",(0,r.jsx)(t.h2,{id:"unable-to-deploy-to-microcontroller",children:"Unable to Deploy to Microcontroller"}),"\n",(0,r.jsxs)(t.p,{children:["When using ESP32s and many other MCUs, at times you may find that you are unable to upload your code. This is often accompanied by an ",(0,r.jsx)(t.code,{children:"Exit status 1"})," or ",(0,r.jsx)(t.code,{children:"Exit status 2"})," error thrown in your terminal. More often than not, this is due to the serial port being busy. Many MCUs have serial ports which are used not only for transmitting serial data, but also for handling different processes such as Bluetooth or WiFi. Most MCU devkits use serial 1 for uploading firmware/code which means that if the serial port is busy, your IDE won't be able to make a successful upload. While some boards may have the capability of automatically interrupting busy serial ports, sometimes this process doesn't work as intended which means you will have to manually interrupt the MCU as shown below."]}),"\n",(0,r.jsx)(t.h3,{id:"manually-interrupting-microcontroller-esp32",children:"Manually Interrupting Microcontroller (ESP32)"}),"\n",(0,r.jsxs)(t.p,{children:["On your ESP32 devkit, you should see 2 buttons. ",(0,r.jsx)(t.code,{children:"Boot"})," and ",(0,r.jsx)(t.code,{children:"Reset/Enable"}),". Firmly hold the ",(0,r.jsx)(t.code,{children:"Boot"})," button for a few seconds and then while still holding the ",(0,r.jsx)(t.code,{children:"Boot"})," button, click the ",(0,r.jsx)(t.code,{children:"Reset/Enable"})," button. You may then release all buttons and upload  your code. If this doesn't work, you can also try to not release the ",(0,r.jsx)(t.code,{children:"Boot"})," button after clicking ",(0,r.jsx)(t.code,{children:"Reset/Enable"})," until the upload begins."]}),"\n",(0,r.jsx)("p",{align:"center",children:(0,r.jsx)("img",{src:"/Atlas/img/Interrupt_ESP32.png",alt:"PlatformIO Banner"})}),"\n",(0,r.jsx)(t.admonition,{type:"note",children:(0,r.jsx)(t.p,{children:"If you manually interrupt the controller, your newly uploaded code will not run on its own. You need to click reset once more in order to restart the microcontroller after it has been interrupted."})})]})}function p(e={}){const{wrapper:t}={...(0,o.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(h,{...e})}):h(e)}},9365:(e,t,n)=>{n.d(t,{A:()=>i});n(6540);var r=n(4164);const o={tabItem:"tabItem_Ymn6"};var a=n(4848);function i(e){let{children:t,hidden:n,className:i}=e;return(0,a.jsx)("div",{role:"tabpanel",className:(0,r.A)(o.tabItem,i),hidden:n,children:t})}},1470:(e,t,n)=>{n.d(t,{A:()=>w});var r=n(6540),o=n(4164),a=n(3104),i=n(6347),l=n(205),s=n(7485),c=n(1682),d=n(9466);function u(e){return r.Children.toArray(e).filter((e=>"\n"!==e)).map((e=>{if(!e||(0,r.isValidElement)(e)&&function(e){const{props:t}=e;return!!t&&"object"==typeof t&&"value"in t}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}function h(e){const{values:t,children:n}=e;return(0,r.useMemo)((()=>{const e=t??function(e){return u(e).map((e=>{let{props:{value:t,label:n,attributes:r,default:o}}=e;return{value:t,label:n,attributes:r,default:o}}))}(n);return function(e){const t=(0,c.X)(e,((e,t)=>e.value===t.value));if(t.length>0)throw new Error(`Docusaurus error: Duplicate values "${t.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[t,n])}function p(e){let{value:t,tabValues:n}=e;return n.some((e=>e.value===t))}function m(e){let{queryString:t=!1,groupId:n}=e;const o=(0,i.W6)(),a=function(e){let{queryString:t=!1,groupId:n}=e;if("string"==typeof t)return t;if(!1===t)return null;if(!0===t&&!n)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return n??null}({queryString:t,groupId:n});return[(0,s.aZ)(a),(0,r.useCallback)((e=>{if(!a)return;const t=new URLSearchParams(o.location.search);t.set(a,e),o.replace({...o.location,search:t.toString()})}),[a,o])]}function f(e){const{defaultValue:t,queryString:n=!1,groupId:o}=e,a=h(e),[i,s]=(0,r.useState)((()=>function(e){let{defaultValue:t,tabValues:n}=e;if(0===n.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(t){if(!p({value:t,tabValues:n}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${t}" but none of its children has the corresponding value. Available values are: ${n.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return t}const r=n.find((e=>e.default))??n[0];if(!r)throw new Error("Unexpected error: 0 tabValues");return r.value}({defaultValue:t,tabValues:a}))),[c,u]=m({queryString:n,groupId:o}),[f,b]=function(e){let{groupId:t}=e;const n=function(e){return e?`docusaurus.tab.${e}`:null}(t),[o,a]=(0,d.Dv)(n);return[o,(0,r.useCallback)((e=>{n&&a.set(e)}),[n,a])]}({groupId:o}),v=(()=>{const e=c??f;return p({value:e,tabValues:a})?e:null})();(0,l.A)((()=>{v&&s(v)}),[v]);return{selectedValue:i,selectValue:(0,r.useCallback)((e=>{if(!p({value:e,tabValues:a}))throw new Error(`Can't select invalid tab value=${e}`);s(e),u(e),b(e)}),[u,b,a]),tabValues:a}}var b=n(2303);const v={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var x=n(4848);function g(e){let{className:t,block:n,selectedValue:r,selectValue:i,tabValues:l}=e;const s=[],{blockElementScrollPositionUntilNextRender:c}=(0,a.a_)(),d=e=>{const t=e.currentTarget,n=s.indexOf(t),o=l[n].value;o!==r&&(c(t),i(o))},u=e=>{let t=null;switch(e.key){case"Enter":d(e);break;case"ArrowRight":{const n=s.indexOf(e.currentTarget)+1;t=s[n]??s[0];break}case"ArrowLeft":{const n=s.indexOf(e.currentTarget)-1;t=s[n]??s[s.length-1];break}}t?.focus()};return(0,x.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,o.A)("tabs",{"tabs--block":n},t),children:l.map((e=>{let{value:t,label:n,attributes:a}=e;return(0,x.jsx)("li",{role:"tab",tabIndex:r===t?0:-1,"aria-selected":r===t,ref:e=>s.push(e),onKeyDown:u,onClick:d,...a,className:(0,o.A)("tabs__item",v.tabItem,a?.className,{"tabs__item--active":r===t}),children:n??t},t)}))})}function y(e){let{lazy:t,children:n,selectedValue:o}=e;const a=(Array.isArray(n)?n:[n]).filter(Boolean);if(t){const e=a.find((e=>e.props.value===o));return e?(0,r.cloneElement)(e,{className:"margin-top--md"}):null}return(0,x.jsx)("div",{className:"margin-top--md",children:a.map(((e,t)=>(0,r.cloneElement)(e,{key:t,hidden:e.props.value!==o})))})}function j(e){const t=f(e);return(0,x.jsxs)("div",{className:(0,o.A)("tabs-container",v.tabList),children:[(0,x.jsx)(g,{...t,...e}),(0,x.jsx)(y,{...t,...e})]})}function w(e){const t=(0,b.A)();return(0,x.jsx)(j,{...e,children:u(e.children)},String(t))}},8453:(e,t,n)=>{n.d(t,{R:()=>i,x:()=>l});var r=n(6540);const o={},a=r.createContext(o);function i(e){const t=r.useContext(a);return r.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function l(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:i(e.components),r.createElement(a.Provider,{value:t},e.children)}}}]);